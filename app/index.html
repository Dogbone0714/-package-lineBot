
<!doctype html><html><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,viewport-fit=cover,user-scalable=no" name=viewport><title>設定 LINE Notify</title><meta content=https://profile.line-scdn.net/0hfy2qypZkOVYPCBGByWBGATNNNzt4Jj8ed21wZXhfMDQka31TNz1_OSMIYmMnOHwANW1zNyoLY2Ij property=og:image><meta content=256 property=og:image:width><meta content=256 property=og:image:height><link href=https://unpkg.com/bootstrap@4/dist/css/bootstrap.min.css rel=stylesheet><link href=https://unpkg.com/font-awesome@4/css/font-awesome.min.css rel=stylesheet><style>[v-cloak]{display:none}body{background-color:#ffc300}.img-hero{max-width:760px;width:100%}</style></head><body><script src="https://www.googletagmanager.com/gtag/js?id=UA-164685281-2" async></script><script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],window.GA_MEASUREMENT_ID="UA-164685281-2",gtag("js",new Date),window.gtagEventLabel=(n,t,a)=>new Promise(e=>{gtag("event",t,{event_callback:e,event_category:n,event_label:a,send_to:"liff"})}),window.gtagEventLabelNi=(n,t,a)=>new Promise(e=>{gtag("event",t,{event_callback:e,event_category:n,event_label:a,non_interaction:!0,send_to:"liff"})}),window.gtagScreenView=n=>new Promise(e=>{gtag("event","screen_view",{event_callback:e,screen_name:n,send_to:"liff"})}),window.gtagSetLineId=e=>{const n=window.liff,t={app_name:"LIFF "+n.getOS(),groups:"liff",send_page_view:!1,transport_type:"beacon",user_id:e};n.isInClient()&&(t.app_version=n.getLineVersion()),gtag("config",GA_MEASUREMENT_ID,t)};</script><div class="min-vh-100 container" id=app style=max-width:768px v-cloak><div class="d-flex flex-column justify-content-center min-vh-100" v-if=loading><h3 class=text-center>載入中，請稍候…</h3></div><div class="d-flex flex-column py-3" v-else><img class="mb-3 rounded w-100" src=https://i.imgur.com/AzsqXWw.png><div class=card><div class="card-body pt-0"><img class="d-block img-hero mx-auto" src=https://i.imgur.com/34SSqBH.png><h5 class="text-center mt-1">為了要開啟借還車通知</h5><h5 class="text-center mt-1">請前往設定頁面並選擇</h5><small class="text-center d-block text-danger">「透過1對1聊天接收LINE Notify的通知」</small><a :href=notifyAuthUrl class="btn btn-block btn-lg btn-warning mt-3">前往設定</a></div></div></div></div><script>window.errToPlainObj=(()=>{const e=["address","code","data","dest","errno","info","message","name","path","port","reason","response.data","response.headers","response.status","stack","status","statusCode","statusMessage","syscall"];return s=>_.pick(s,e)})(),window.isAndroid=()=>navigator.userAgent.match(/Android/i);</script><script src=https://static.line-scdn.net/liff/edge/2/sdk.js crossorigin=anonymous></script><script src=https://unpkg.com/axios/dist/axios.min.js crossorigin=anonymous></script><script src=https://unpkg.com/js-base64@2/base64.min.js crossorigin=anonymous></script><script src=https://unpkg.com/lodash@4/lodash.min.js crossorigin=anonymous></script><script src=https://unpkg.com/qs@6/dist/qs.js crossorigin=anonymous></script><script src=https://unpkg.com/sweetalert2@11 crossorigin=anonymous></script><script src=https://unpkg.com/vue@2/dist/vue.min.js crossorigin=anonymous></script><script>const loginPromise=(async()=>{if(await liff.init({liffId:"1654198613-pV2QdV5Q"}),!liff.isLoggedIn())return liff.login({redirectUri:location.href}),new Promise(e=>{});let e={};try{e=await liff.getProfile()}catch(e){console.error(window.errToPlainObj(e))}return window.gtagSetLineId&&window.gtagSetLineId(e.userId),e})();window.encodeBase64url=e=>Base64.encode(e).replace(/[+/=]/g,e=>_.get({"+":"-","/":"_","=":""},e)),window.decodeBase64url=e=>Base64.decode(e.replace(/[-_]/g,e=>_.get({"-":"+",_:"/"},e))),window.vm=new Vue({el:"#app",data:{loading:!0,notifyAuthUrl:""},async mounted(){var e=this.paramBase64url("redirect");e&&localStorage.setItem(location.pathname+"-redirect",e),await this.init()},methods:{async init(){try{this.loading=!0;var e,t=await this.apiGet("/liff-ajax/line-notify");if(_.get(t,"notify.target_type"))return window.gtagScreenView("[LIFF][Notify][綁定成功]"),e=localStorage.getItem(location.pathname+"-redirect")||"https://liff.line.me/1654198613-pV2QdV5Q/preference",localStorage.removeItem(location.pathname+"-redirect"),location.href=e,await new Promise(e=>{});window.gtagScreenView("[LIFF][Notify][設定教學]"),this.notifyAuthUrl=_.get(t,"notifyAuthUrl"),this.loading=!1}catch(e){if(401===_.get(e,"response.status")){const i=new URL("https://liff.line.me/1654198613-pV2QdV5Q/link-youbike");return i.searchParams.set("redirect",window.encodeBase64url("https://liff.line.me/1654198613-pV2QdV5Q/line-notify")),location.href=i.href,new Promise(e=>{})}e.message=_.get(e,"response.data.message",e.message),console.error(window.errToPlainObj(e)),await Swal.fire({icon:"error",text:e.message,title:"設定頁錯誤"})}},paramBase64url(e,t){e=new URL(location).searchParams.get(e);return _.isNil(e)?t:window.decodeBase64url(e)},async apiGet(e,t){return await loginPromise,_.get(await axios.get(e,{headers:{Authorization:"Bearer "+liff.getAccessToken()},params:t}),"data")},async apiPost(e,t){return await loginPromise,_.get(await axios.post(e,t,{headers:{Authorization:"Bearer "+liff.getAccessToken()}}),"data")}}});</script></body></html>